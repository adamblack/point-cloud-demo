(()=>{"use strict";var t,a,e={5067:(t,a,e)=>{var r=e(9477);let o=100,n=-100,i=3355443,l=1e4;function s(t,a,e,r,o,n,i,l){if(0!=t){let s=t,d=t,u=t,p=t;const c=t/100*5;Array.isArray(a)?(r>0&&(s=a[e][r-1]),r<o-1&&(d=a[e][r+1]),e>0&&(u=a[e-1][r]),e<n-1&&(p=a[e+1][r])):(r>0&&(s=a.data[4*i-4]),r<o-1&&(d=a.data[4*i+4]),i-o>0&&(u=a.data[4*(i-o)]),i+o<n*o-1&&(p=a.data[4*(i+o)])),Math.abs(s-t)>c||Math.abs(d-t)>c||Math.abs(u-t)>c||Math.abs(p-t)>c?l[3*i+2]=0:Array.isArray(a)?l[3*i+2]=3*(1-t):l[3*i+2]=10+-1*t/20}}function d(t){let a=0;for(let e of t)a=(a<<8)+e;return a}onmessage=t=>{let a;switch(t.data.targetGeometry){case"Waifus":a=function(t,a){const e=new r.u9r,o=t[0],n=t[1],i=t[2],l=t[3],d=o.height,u=o.width,p=u*d,c=new Float32Array(3*p),h=new Float32Array(3*p),w=new Float32Array(3*p),f=new Float32Array(3*p),b=[],A=[],m=[],g=[];let y=0;for(let e=0;e<a;e++)m[e]=t[e+4];for(let e=0;e<a;e++)g[e]=t[e+4+a];for(let t=0;t<a;t++)b[t]=new Float32Array(3*p),A[t]=new Float32Array(3*p);for(let t=0;t<d;t++)for(let e=0;e<u;e++){const r=t/u,p=e/u,T=n.data[4*y],E=l.data[4*y];c[3*y+1]=d/u/2-r,c[3*y]=p-.5,s(T,n,t,e,u,d,y,c),h[3*y]=o.data[4*y]/255,h[3*y+1]=o.data[4*y+1]/255,h[3*y+2]=o.data[4*y+2]/255;for(let o=0;o<a;o++)b[o][3*y+1]=d/u/2-r,b[o][3*y]=p-.5,s(g[o].data[4*y],g[o],t,e,u,d,y,b[o]),A[o][3*y]=m[o].data[4*y]/255,A[o][3*y+1]=m[o].data[4*y+1]/255,A[o][3*y+2]=m[o].data[4*y+2]/255;w[3*y+1]=d/u/2-r,w[3*y]=p-.5,s(E,l,t,e,u,d,y,w),f[3*y]=i.data[4*y]/255,f[3*y+1]=i.data[4*y+1]/255,f[3*y+2]=i.data[4*y+2]/255,y++}e.setAttribute("position",new r.TlE(c,3)),e.setAttribute("color",new r.TlE(h,3)),e.morphAttributes.position=[],e.morphAttributes.color=[];for(let t=0;t<a;t++)e.morphAttributes.position[t]=new r.TlE(b[t],3),e.morphAttributes.color[t]=new r.TlE(A[t],3);return e.morphAttributes.position[a]=new r.TlE(w,3),e.morphAttributes.color[a]=new r.TlE(f,3),e}(t.data.imageData,t.data.stepsNumber);break;case"Farm":a=function(t,a,e){const s=new r.u9r,u=t[0].height,p=t[0].width,c=p*u,h=(new Float32Array(2*c),new Float32Array(3*c)),w=new Float32Array(3*c),f=new Float32Array(3*c),b=new Float32Array(3*c);let A=0,m=t[1].data[p*u*2];a[e]=[new r.Pa4(0,0,m/l),new r.Pa4(0,0,m/l),new r.Pa4(0,0,m/l)];for(let a=0;a<u;a++)for(let e=0;e<p;e++){const r=a/p,l=e/p;h[3*A+1]=u/p/2-r,h[3*A]=l-.5,h[3*A+2]=t[1].data[4*A]/30,h[3*A+2]<o&&(o=h[3*A+2]),h[3*A+2]>n&&(n=h[3*A+2]),w[3*A+1]=u/p/2-r,w[3*A]=l-.5,w[3*A+2]=d([t[0].data[4*A+0],t[0].data[4*A+1],t[0].data[4*A+2]])/i,f[3*A+1]=u/p/2-r,f[3*A]=l-.5,f[3*A+2]=0,b[3*A]=t[0].data[4*A]/255,b[3*A+1]=t[0].data[4*A+1]/255,b[3*A+2]=t[0].data[4*A+2]/255,A++}return s.setAttribute("color",new r.TlE(b,3)),s.setAttribute("position",new r.TlE(h,3)),s.morphAttributes.position=[],s.morphAttributes.color=[],s.morphAttributes.position[0]=new r.TlE(f,3),s.morphAttributes.color[0]=new r.TlE(b,3),s.morphAttributes.position[1]=new r.TlE(w,3),s.morphAttributes.color[1]=new r.TlE(b,3),s}(t.data.imageData,t.data.centerPointToUpdate,t.data.targetGeometry);break;case"Koala":a=function(t,a){const e=new r.u9r,o=t[0],n=t[1],l=o.height,s=o.width,u=s*l,p=new Float32Array(3*u),c=new Float32Array(3*u),h=new Float32Array(3*u),w=new Float32Array(3*u),f=[],b=[],A=[];let m=0;for(let e=0;e<a;e++)A[e]=t[e+2];for(let t=0;t<a;t++)f[t]=new Float32Array(3*u),b[t]=new Float32Array(3*u);for(let t=0;t<l;t++)for(let e=0;e<s;e++){const r=t/s,u=e/s;p[3*m+1]=l/s/2-r,p[3*m]=u-.5,p[3*m+2]=d([o.data[4*m+0],o.data[4*m+1],o.data[4*m+2]])/i,c[3*m]=o.data[4*m]/255,c[3*m+1]=o.data[4*m+1]/255,c[3*m+2]=o.data[4*m+2]/255;for(let t=0;t<a;t++)f[t][3*m+1]=l/s/2-r,f[t][3*m]=u-.5,f[t][3*m+2]=d([A[t].data[4*m+0],A[t].data[4*m+1],A[t].data[4*m+2]])/i,b[t][3*m]=A[t].data[4*m]/255,b[t][3*m+1]=A[t].data[4*m+1]/255,b[t][3*m+2]=A[t].data[4*m+2]/255;h[3*m+1]=l/s/2-r,h[3*m]=u-.5,h[3*m+2]=d([n.data[4*m+0],n.data[4*m+1],n.data[4*m+2]])/i,w[3*m]=n.data[4*m]/255,w[3*m+1]=n.data[4*m+1]/255,w[3*m+2]=n.data[4*m+2]/255,m++}e.setAttribute("position",new r.TlE(p,3)),e.setAttribute("color",new r.TlE(c,3)),e.morphAttributes.position=[],e.morphAttributes.color=[];for(let t=0;t<a;t++)e.morphAttributes.position[t]=new r.TlE(f[t],3),e.morphAttributes.color[t]=new r.TlE(b[t],3);return e.morphAttributes.position[a]=new r.TlE(h,3),e.morphAttributes.color[a]=new r.TlE(w,3),e}(t.data.imageData,t.data.stepsNumber);break;case"ai_images":a=function(t,a,e){null==a[e]&&(a[e]=[]);const o=new r.u9r,n=[],i=[],l=[],s=[];let d=0,u=0,p=0;for(let a=0;a<t.length/2;a++)l[a]=t[2*a],s[a]=t[2*a+1],u=Math.max(u,l[a].height),p=Math.max(u,l[a].width);for(let t=0;t<l.length;t++){const o=l[t].height,c=l[t].width,h=p*u;a[e][t]=new r.Pa4(0,0,s[t].data[o*c*2]/3e4);const w=u-o,f=p-c,b=Math.floor(w/2),A=Math.floor(f/2);n[t]=new Float32Array(3*h),i[t]=new Float32Array(3*h);for(let a=0;a<u;a++)for(let e=0;e<p;e++){const r=a/p,h=e/p;if(e<A||e>=p-A-1||a<b||a>=u-b-1)n[t][3*d+1]=o/c/2-r,n[t][3*d]=h-.5,n[t][3*d+2]=0,i[t][3*d]=0,i[t][3*d+1]=0,i[t][3*d+2]=0;else{const u=a-b,p=e-A;n[t][3*d+1]=o/c/2-r,n[t][3*d]=h-.5,n[t][3*d+2]=s[t].data[4*(u*c+p)]/40,i[t][3*d]=l[t].data[4*(u*c+p)]/255,i[t][3*d+1]=l[t].data[4*(u*c+p)+1]/255,i[t][3*d+2]=l[t].data[4*(u*c+p)+2]/255}d++}d=0}if(o.setAttribute("position",new r.TlE(n[0],3)),o.setAttribute("color",new r.TlE(i[0],3)),n.length>1){o.morphAttributes.position=[],o.morphAttributes.color=[];for(let t=1;t<l.length;t++)o.morphAttributes.position[t-1]=new r.TlE(n[t],3),o.morphAttributes.color[t-1]=new r.TlE(i[t],3)}return o}(t.data.imageData,t.data.centerPointToUpdate,t.data.targetGeometry)}postMessage({geometry:a,centerPointToUpdate:t.data.centerPointToUpdate,imgMinZ:o,imgMaxZ:n})}}},r={};function o(t){var a=r[t];if(void 0!==a)return a.exports;var n=r[t]={exports:{}};return e[t](n,n.exports,o),n.exports}o.m=e,o.x=()=>{var t=o.O(void 0,[477],(()=>o(5067)));return o.O(t)},t=[],o.O=(a,e,r,n)=>{if(!e){var i=1/0;for(u=0;u<t.length;u++){for(var[e,r,n]=t[u],l=!0,s=0;s<e.length;s++)(!1&n||i>=n)&&Object.keys(o.O).every((t=>o.O[t](e[s])))?e.splice(s--,1):(l=!1,n<i&&(i=n));if(l){t.splice(u--,1);var d=r();void 0!==d&&(a=d)}}return a}n=n||0;for(var u=t.length;u>0&&t[u-1][2]>n;u--)t[u]=t[u-1];t[u]=[e,r,n]},o.d=(t,a)=>{for(var e in a)o.o(a,e)&&!o.o(t,e)&&Object.defineProperty(t,e,{enumerable:!0,get:a[e]})},o.f={},o.e=t=>Promise.all(Object.keys(o.f).reduce(((a,e)=>(o.f[e](t,a),a)),[])),o.u=t=>t+".bundle.js",o.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),o.o=(t,a)=>Object.prototype.hasOwnProperty.call(t,a),(()=>{var t;o.g.importScripts&&(t=o.g.location+"");var a=o.g.document;if(!t&&a&&(a.currentScript&&(t=a.currentScript.src),!t)){var e=a.getElementsByTagName("script");e.length&&(t=e[e.length-1].src)}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),o.p=t})(),(()=>{var t={67:1};o.f.i=(a,e)=>{t[a]||importScripts(o.p+o.u(a))};var a=self.webpackChunkpoint_cloud_based_visualizer=self.webpackChunkpoint_cloud_based_visualizer||[],e=a.push.bind(a);a.push=a=>{var[r,n,i]=a;for(var l in n)o.o(n,l)&&(o.m[l]=n[l]);for(i&&i(o);r.length;)t[r.pop()]=1;e(a)}})(),a=o.x,o.x=()=>o.e(477).then(a),o.x()})();